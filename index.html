<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Site/blog do GEPPHAE" />
    <meta name="author" content="Emanuel Pereira Schlickmann" />
    <meta name="robots" content="index, follow" />
    <link rel="icon" href="img/logo.jpeg" type="image/x-icon" />
    <link rel="stylesheet" href="css/style.css" />
    <title>GEPPHAE</title>
  </head>
  <body>
    <header>
      <div class="logo">
        <a href="index.html"><img src="img/logo.jpeg" alt="" /></a>
      </div>
      <nav class="nav">
        <ul>
          <li><a href="html/sobre.html">Sobre</a></li>
          <li><a href="html/noticias.html">Notícias</a></li>
          <li><a href="html/colunas.html">Colunas</a></li>
          <li><a href="html/galeria.html">Galeria</a></li>
          <li><a href="html/agenda.html">Agenda</a></li>
          <!-- <li><a href="html/sinfop.html">SinFop</a></li> -->
        </ul>
      </nav>
    </header>

    <main class="conteudo">
      <div class="principal">
        <!-- Slider -->
        <div class="slider">
          <img id="moldura" class="fadeIn" src="" />
          <button id="btnVoltar" class="botao botao-esquerda">&lt;</button>
          <button id="btnAvancar" class="botao botao-direita">&gt;</button>
        </div>

        <!-- Sobre -->
        <section>
          <article>
            <div class="sobre">
              <h2 class="sobre-h2"><a href="html/sobre.html">Sobre</a></h2>
              <p>
                Grupo de Estudos e Pesquisa em Políticas Educacionais, História
                e Alfabetização na Educação Básica (GEPPHAE) é um grupo de
                pesquisa vinculado a uma instituição de ensino superior, que se
                dedica à reflexão crítica e à produção de conhecimento sobre os
                processos de alfabetização, as políticas educacionais e as
                práticas escolares no contexto da educação básica.
              </p>
            </div>
          </article>
        </section>

        <!-- Colunas -->
        <section>
          <article>
            <div class="colunas">
              <h2 class="colunas-h2">
                <a href="html/colunas.html">Colunas</a>
              </h2>
              <div class="colunas-container">
                <div class="coluna-img">
                  <img src="img/mariaSirlene.jpg" alt="" />
                  <h3>Maria Sirlene Pereira Schlickmann</h3>
                  <p><em>Descrição</em></p>
                </div>
                <!-- <div class="coluna-img">
                  <img src="img/col2.jpg" alt="" />
                  <h3>Autor 2</h3>
                  <p><em>Descrição</em></p>
                </div>
                <div class="coluna-img">
                  <img src="img/col3.jpg" alt="" />
                  <h3>nome pessoa</h3>
                  <p><em>Descrição</em></p>
                </div> -->
              </div>
            </div>
          </article>
        </section>

        <!-- Agenda -->
        <section>
          <article>
            <div class="agenda" id="agenda-container">
              <h2><a href="html/agenda.html">Agenda</a></h2>
            </div>
          </article>
        </section>

        <!-- Galeria -->
        <section>
          <article>
            <div class="galeria">
              <h2><a href="html/galeria.html">Galeria</a></h2>
              <div class="galeria-imagens">
                <img src="img/img1.jpg" alt="Imagem 1" />
                <img src="img/img2.jpg" alt="Imagem 2" />
                <img src="img/img3.jpg" alt="Imagem 3" />
              </div>
            </div>
          </article>
        </section>
      </div>

      <aside>
        <div class="noticias-aside">
          <h2>Notícias</h2>
          <ul id="noticias-recentes"></ul>
        </div>

        <div class="login-usuario">
          <div class="card-login">
            <h2>Área Restrita</h2>
            <button id="abrirModal">
              <a href="html/admin.html" target="_blank">Login</a>
            </button>
          </div>
        </div>
      </aside>
    </main>

    <!-- Footer -->
    <footer>
      <div class="footer-container">
        <div class="footer-col">
          <h4>Menu</h4>
          <ul>
            <li><a href="index.html">Início</a></li>
            <li><a href="html/noticias.html">Notícias</a></li>
            <li><a href="html/colunas.html">Colunas</a></li>
            <li><a href="html/galeria.html">Galeria</a></li>
            <li><a href="html/agenda.html">Agenda</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Contato</h4>
          <p>Email: gepphae@gmail.com</p>
          <p>
            <img
              src="img/instagram.png"
              alt="Instagram"
              style="width: 16px; vertical-align: middle; margin-right: 5px"
            />
            <a href="https://www.instagram.com/gepphae/" target="_blank"
              >Instagram</a
            >
          </p>
        </div>

        <div class="footer-col">
          <h4>Créditos</h4>
          <p>&copy; 2025 - Emanuel Pereira Schlickmann</p>
          <p>Email: emanuel.schlickmann@gmail.com</p>
          <p>Todos os direitos reservados.</p>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="script/script.js"></script>

    <script>
      fetch("https://projeto-final-flask.onrender.com/api/news")
        .then((response) => response.json())
        .then((newsArray) => {
          const ul = document.getElementById("noticias-recentes");
          const maisRecentes = newsArray
            .sort((a, b) => new Date(b.date) - new Date(a.date))
            .slice(0, 2);
          ul.innerHTML = maisRecentes
            .map(
              (news) =>
                `<li><a href="html/noticias.html">${news.title}</a></li>`
            )
            .join("");
        })
        .catch(() => {
          document.getElementById("noticias-recentes").innerHTML =
            "<li>Erro ao carregar notícias</li>";
        });
    </script>

    <script>
      fetch("https://projeto-final-flask.onrender.com/api/events")
        .then((response) => response.json())
        .then((eventArray) => {
          const container = document.getElementById("agenda-container");
          const proximosEventos = eventArray
            .filter((e) => new Date(e.date) >= new Date())
            .sort((a, b) => new Date(a.date) - new Date(b.date))
            .slice(0, 3);

          if (proximosEventos.length === 0) {
            container.innerHTML += "<p>Nenhum evento futuro cadastrado.</p>";
            return;
          }

          proximosEventos.forEach((event) => {
            const [ano, mes, dia] = event.date.split("-");
            const dataObj = new Date(ano, mes - 1, dia); // meses começam do zero
            const dataBR = dataObj.toLocaleDateString("pt-BR", {
              day: "2-digit",
              month: "2-digit",
              year: "numeric",
            });

            container.innerHTML += `
            <div class="evento">
              <h3>${event.title}</h3>
              <p>${event.content}</p>
              <p><strong>Data:</strong> ${dataBR}</p>
            </div>
          `;
          });
        })
        .catch(() => {
          document.getElementById("agenda-container").innerHTML +=
            "<p>Erro ao carregar eventos.</p>";
        });
    </script>
  </body>
</html>
